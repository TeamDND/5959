# 상반신 자세 경고알림 서비스 요구사항명세서 (PRD)

## 1. 프로젝트 개요

### 1.1 프로젝트명
상반신 자세 경고알림 서비스 (Upper Body Posture Alert Service)

### 1.2 프로젝트 목적
사용자의 상반신 자세를 실시간으로 모니터링하고, 기본 자세에서 벗어날 경우 경고 알림을 제공하여 올바른 자세를 유지할 수 있도록 도와주는 웹 기반 서비스

### 1.3 기술 스택
- **프론트엔드**: React 18.2.0
- **백엔드**: Python Flask
- **AI 모델**: MediaPipe Pose Landmarks
- **이미지 분류**: PyTorch (가장 작은 버전)
- **웹캠 처리**: WebRTC API
- **스타일링**: CSS3

## 2. 기능 요구사항

### 2.1 메인 화면 (Landing Page)
- **기능**: 자세 경고 알람에 대한 설명문구 표시
- **구성 요소**:
  - 서비스 소개 문구
  - 시작하기 버튼
- **동작**: 시작하기 버튼 클릭 시 기본자세 설정화면으로 이동

### 2.2 기본자세 설정 화면
- **기능**: 사용자의 기본 자세 이미지 촬영 및 저장
- **구성 요소**:
  - 웹캠 화면
  - 촬영 버튼
  - 재촬영 버튼
  - 저장 버튼
- **동작**:
  - 촬영: 웹캠으로 현재 자세 촬영
  - 재촬영: 촬영된 이미지 삭제 후 재촬영
  - 저장: 촬영된 이미지를 기본 자세로 저장 후 설정 화면으로 이동

### 2.3 설정 화면
- **기능**: 자세 모니터링 설정 및 저장된 기본 이미지 표시
- **구성 요소**:
  - 저장된 기본 자세 이미지 표시
  - 설정 옵션들:
    - 벗어나는 범위의 정도 (픽셀 단위)
    - 이미지 비교 주기 (초 단위)
    - 알람 발생 임계값 (횟수)
  - 분석시작 버튼
- **동작**: 분석시작 버튼 클릭 시 분석 화면으로 이동

### 2.4 분석 화면
- **기능**: 실시간 자세 모니터링 및 경고 알림
- **구성 요소**:
  - 기본 자세 이미지 (왼쪽)
  - 실시간 웹캠 화면 (오른쪽)
  - 자세 상태 표시
  - 알람 시스템
- **동작**:
  - 설정된 주기마다 기본 이미지와 실시간 이미지 비교
  - 설정된 범위를 벗어날 경우 빨간색 화면으로 변경
  - 임계값 초과 시 알람 발생

## 3. 기술 요구사항

### 3.1 AI 모델
- **MediaPipe Pose Landmarks**: 33개 포인트의 상반신 자세 감지
- **PyTorch 모델**: 가장 작은 버전의 이미지 분류 모델 사용
- **실시간 처리**: 웹캠 스트림에서 프레임별 자세 분석

### 3.2 백엔드 API (Flask)
- **엔드포인트**:
  - `POST /api/posture/setup`: 기본 자세 이미지 저장
  - `POST /api/posture/analyze`: 실시간 자세 분석
  - `GET /api/posture/settings`: 설정 정보 조회
  - `POST /api/posture/settings`: 설정 정보 저장
- **이미지 처리**: OpenCV를 통한 이미지 전처리
- **데이터 저장**: 로컬 파일 시스템 또는 간단한 데이터베이스

### 3.3 프론트엔드 (React)
- **컴포넌트 구조**:
  - `PostureLanding`: 메인 화면
  - `PostureSetup`: 기본자세 설정
  - `PostureSettings`: 설정 화면
  - `PostureAnalysis`: 분석 화면
- **상태 관리**: React Context 또는 useState를 통한 로컬 상태 관리
- **라우팅**: React Router를 통한 화면 전환

## 4. 사용자 인터페이스 요구사항

### 4.1 디자인 가이드라인
- **색상 팔레트**: 기존 프로젝트와 동일
  - 주조색: #005793
  - 보조색: #E6F0F5
  - 포인트색: #F76800
- **폰트**: 온글잎 대롱체 (기존 프로젝트와 동일)
- **반응형 디자인**: 모바일 및 데스크톱 지원

### 4.2 사용자 경험
- **직관적 조작**: 3단계로 구성된 간단한 워크플로우
- **실시간 피드백**: 자세 상태에 따른 즉각적인 시각적 피드백
- **접근성**: 키보드 네비게이션 및 스크린 리더 지원

## 5. 성능 요구사항

### 5.1 응답 시간
- **이미지 분석**: 1초 이내
- **알람 발생**: 설정된 주기 내 즉시 반응
- **화면 전환**: 0.5초 이내

### 5.2 정확도
- **자세 감지**: MediaPipe 모델의 기본 정확도 유지
- **알람 정확도**: 90% 이상의 정확한 자세 벗어남 감지

## 6. 보안 및 개인정보 보호

### 6.1 데이터 보호
- **이미지 저장**: 로컬 저장소에만 저장
- **개인정보**: 수집하지 않음
- **데이터 전송**: HTTPS 통신

### 6.2 접근 제어
- **웹캠 접근**: 사용자 명시적 허용 필요
- **파일 접근**: 로컬 파일 시스템만 접근

## 7. 구현 계획

### 7.1 1단계: 기본 구조 및 라우팅
- React 컴포넌트 기본 구조 생성
- Flask API 엔드포인트 구현
- 기본 라우팅 설정

### 7.2 2단계: 웹캠 연동 및 이미지 처리
- 웹캠 접근 및 스트리밍 구현
- 이미지 촬영 및 저장 기능
- MediaPipe 연동

### 7.3 3단계: 자세 분석 및 알림 시스템
- 실시간 자세 비교 알고리즘 구현
- 알림 시스템 구현
- UI 상태 관리

### 7.4 4단계: 테스트 및 최적화
- 성능 테스트
- 사용자 테스트
- 버그 수정 및 최적화

## 8. 제약사항 및 고려사항

### 8.1 기술적 제약
- **브라우저 호환성**: 최신 Chrome, Firefox, Safari 지원
- **웹캠 품질**: 최소 720p 해상도 권장
- **하드웨어**: GPU 가속 지원 권장

### 8.2 사용자 제약
- **조명**: 적절한 조명 환경 필요
- **자세**: 상반신이 웹캠에 완전히 보이는 위치
- **정지**: 분석 중에는 최대한 정지 상태 유지

## 9. 성공 지표

### 9.1 기술적 지표
- 자세 감지 정확도 90% 이상
- 실시간 분석 지연시간 1초 이내
- 시스템 안정성 99% 이상

### 9.2 사용자 경험 지표
- 사용자 만족도 4.0/5.0 이상
- 기능 완성도 95% 이상
- 사용자 이탈률 20% 이하

## 10. 향후 확장 계획

### 10.1 기능 확장
- 다양한 자세 유형 지원
- 개인별 자세 패턴 학습
- 통계 및 리포트 기능

### 10.2 플랫폼 확장
- 모바일 앱 개발
- 데스크톱 애플리케이션
- API 서비스 제공
